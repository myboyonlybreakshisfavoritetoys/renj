<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astralgia</title>
    <link rel="icon" type="image/png" href="renjfavicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define custom font families.
            You will need to import 'NeueHaasGroteskDisp Pro' and 'NeueHaasGroteskDisp Pro Blk'
            via @font-face rules or a font hosting service (e.g., Adobe Fonts, MyFonts)
            for them to display correctly.
            Example (replace with your actual font file paths/URLs):
        */
        /*
        @font-face {
            font-family: 'NeueHaasGroteskDisp Pro';
            src: url('path/to/NeueHaasGroteskDispPro.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'NeueHaasGroteskDisp Pro Blk';
            src: url('path/to/NeueHaasGroteskDispProBlk.woff2') format('woff2');
            font-weight: 900; /* Or appropriate bold weight */
            font-style: normal;
        }
        */

        body {
            font-family: 'NeueHaasGroteskDisp Pro', sans-serif; /* Fallback to sans-serif */
            margin: 0;
            padding: 0;
            color: #D1DBD7; /* Text outside boxes, e.g., 'astralgia' title */
            overflow-x: hidden; /* Prevent horizontal scroll due to parallax */
        }

        .font-bold-custom {
            font-family: 'NeueHaasGroteskDisp Pro Blk', sans-serif; /* Fallback to sans-serif */
            font-weight: 900; /* Ensure it's bold */
        }

        /* General box styling applied via Tailwind classes now, but kept for consistency */
        .content-box {
            background-color: #D1DBD7; /* Light grey for boxes */
            border-radius: 0.75rem; /* Reduced uniform rounded corners (rounded-xl in Tailwind) */
            padding: 1rem; /* Reduced padding */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }

        .collapsible-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0; /* Padding for click area */
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding-top: 0; /* Start with no padding */
        }

        .collapsible-content.expanded {
            max-height: 500px; /* Adjust as needed for content height */
            padding-top: 0.75rem; /* Reduced padding when expanded */
        }

        .arrow {
            transition: transform 0.3s ease-out;
            color: #1A325C; /* Dark color for contrast on light background */
        }

        .arrow.expanded {
            transform: rotate(90deg);
        }

        /* Styling for the main astralgia title within header */
        .astralgia-site-title {
            color: #D1DBD7; /* Light grey on dark blue background */
            transition: none; /* No transition */
        }

        /* Styling for the logo image within the nav */
        .sidebar-nav .logo-img {
            height: 2rem; /* Slightly smaller height */
            width: auto; /* Maintain aspect ratio */
        }

        /* Styling for the flipbook embed container */
        .flipbook-container {
            background-color: #D1DBD7; /* Light grey for flipbook container */
            border-radius: 0.75rem; /* Reduced corner rounding */
            padding: 1rem; /* Reduced padding */
            overflow: hidden; /* Ensure embed fits and no scrollbars */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Aspect ratio container for the iframe */
        .iframe-aspect-ratio {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio (9 / 16 * 100%) */
            height: 0;
            overflow: hidden; /* Hide any overflow from the iframe */
            border-radius: 0.75rem; /* Apply rounded corners to the aspect ratio container */
        }

        .flipbook-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* New Story Viewer Section Styles */
        .story-viewer-section {
            background-color: #D1DBD7; /* Light grey background */
            border-radius: 0.75rem; /* Reduced corner rounding */
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative; /* For absolute positioning of children */
            overflow: hidden; /* Hide overflow from image */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .story-section-title {
            color: #1A325C; /* Dark blue for the title */
        }

        .story-content-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio (9 / 16 * 100%) for the story content area */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem; /* Rounded corners for the story display area */
            background-color: #1A325C; /* Dark background for the image area */
        }

        .story-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* Ensure image fits without cropping */
            transition: opacity 0.5s ease-in-out; /* Smooth fade for image */
        }

        .story-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1.5rem;
            z-index: 1001;
            user-select: none; /* Prevent text selection */
        }

        .story-nav-button.prev {
            left: 1rem;
        }

        .story-nav-button.next {
            right: 1rem;
        }

        /* Replay Story Overlay Styles */
        .replay-story-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Almost black overlay */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        .replay-story-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .replay-story-button {
            background-color: #D1DBD7; /* Light grey button */
            color: #1A325C; /* Dark blue text */
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        .replay-story-button:hover {
            background-color: #C0C8C4; /* Slightly darker grey on hover */
            transform: translateY(-2px);
        }

        /* Story Progress Bar Styles */
        .story-progress-container {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.25rem; /* Space between bars */
            z-index: 1003;
        }

        .story-progress-bar {
            flex-grow: 1;
            height: 0.25rem; /* Height of the bar */
            background-color: rgba(255, 255, 255, 0.5); /* Inactive bar color */
            border-radius: 0.125rem;
            overflow: hidden; /* For the inner progress animation */
        }

        .story-progress-fill {
            width: 0;
            height: 100%;
            background-color: #ffffff; /* Active bar color */
            border-radius: 0.125rem;
            /* Animation will be applied via JS */
        }

        @keyframes fillProgressBar {
            from { width: 0; }
            to { width: 100%; }
        }

        /* Styles for catalog photo placeholders */
        .catalog-photo-placeholder {
            position: relative;
            width: 100%;
            padding-bottom: 100%; /* Makes it square */
            background-color: #2A4E7E; /* A darker shade of blue for the background */
            border-radius: 0.75rem; /* Reduced corner rounding */
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer; /* Added cursor for interactivity hint */
            transition: transform 0.2s ease-in-out; /* Added transition for hover effect */
        }

        .catalog-photo-placeholder:hover {
            transform: translateY(-5px); /* Lift effect on hover */
        }

        .catalog-photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0.5rem;
            color: #D1DBD7; /* Light text color */
        }

        .catalog-photo-overlay .release-type {
            font-size: 0.65rem; /* Smaller text */
            font-style: italic; /* Italic */
            margin-bottom: 0.1rem; /* Reduced margin */
            line-height: 1.1; /* Tighter line height */
        }

        .catalog-photo-overlay .release-title {
            font-size: 0.8rem; /* Slightly bigger than release-type */
            font-weight: bold; /* Bold */
            line-height: 1.1; /* Tighter line height */
        }

        /* Consistent font sizes for content */
        .content-box p {
            color: #1A325C; /* Dark blue text */
            font-size: 0.9rem; /* Consistent font size */
        }
        .content-box h3 {
            color: #1A325C; /* Dark blue text */
            font-size: 1.25rem; /* Consistent font size for section titles */
        }
        .catalog-section h2 {
            color: #1A325C; /* Dark blue text */
            font-size: 1.25rem; /* Consistent font size for catalog title */
        }
        /* Adjust padding and gap for a smaller catalog section */
        .catalog-section {
            padding: 0.5rem; /* Further reduced padding */
            margin-bottom: 1rem; /* Reduced margin */
            max-width: 400px; /* Further reduced max width for the catalog section */
            margin-left: auto; /* Center the section */
            margin-right: auto; /* Center the section */
        }
        .catalog-photos-grid {
            gap: 0.5rem; /* Further reduced gap between photos */
            grid-template-columns: repeat(2, 1fr); /* Explicitly 2 columns for the two images */
        }
        /* Ensure individual photo placeholder is strictly square */
    
        .catalog-photo-placeholder .catalog-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; /* Ensures the image covers the area, cropping if necessary */
    border-radius: 0.75rem; /* Match the parent's border-radius */
    z-index: 0; /* Place image behind the overlay text */
}

/* Remove the background-color from the placeholder when using an <img> tag */
.catalog-photo-placeholder {
    /* Keep other styles like position, width, padding-bottom, etc. */
    background-color: transparent; /* Or remove this line entirely if you prefer */
}

/* Ensure the overlay is on top */
.catalog-photo-overlay {
    z-index: 1; /* Ensure text overlay is above the image */
}
    </style>
</head>
<body class="h-full bg-[#1A325C] text-[#D1DBD7]">
    <!-- Changed max-w-screen-md to max-w-screen-lg to widen the layout slightly -->
    <div class="main-layout-container mx-auto p-4 md:p-6 lg:p-8 max-w-screen-lg">
        <!-- Header (New) -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-6 md:mb-8">
            <!-- Astralgia title for the overall site -->
            <h1 class="astralgia-site-title font-bold-custom text-4xl md:text-5xl lg:text-6xl text-[#D1DBD7] mb-4 md:mb-0">astralgia</h1>
            <!-- Logo and navigation links -->
            <nav class="sidebar-nav flex items-center gap-4 md:gap-6">
                <img src="renjlogo.png" alt="renj logo" class="logo-img">
                <a href="index.html" class="text-[#D1DBD7] text-lg hover:underline">home</a>
                <a href="cyleii.html" class="text-[#D1DBD7] text-lg hover:underline">cycle ii</a>
            </nav>
        </header>

        <!-- Flipbook Container (at the very top, below header) -->
        <!-- Reduced mb-6 md:mb-8 to mb-4 md:mb-6 -->
        <div class="flipbook-container mb-4 md:mb-6">
            <div class="iframe-aspect-ratio">
                <iframe src="https://online.pubhtml5.com/nbxmf/mblk/" allowfullscreen></iframe>
            </div>
        </div>

        <!-- Main Content Area (Stacked Sections) -->
        <!-- Reduced space-y-6 md:space-y-8 to space-y-4 md:space-y-6 -->
        <div class="main-content-area space-y-4 md:space-y-6">
            <!-- Story Viewer Section -->
            <!-- Changed rounded-3xl to rounded-xl -->
            <div id="story-viewer-section" class="story-viewer-section bg-[#D1DBD7] text-[#1A325C] rounded-xl p-4 md:p-6 shadow-lg">
                <h2 class="story-section-title font-bold-custom text-2xl md:text-3xl mb-4">astralgia stories</h2>
                <div class="story-content-wrapper">
                    <div id="story-progress-container" class="story-progress-container"></div>
                    <img id="story-image" src="" alt="Story Image" class="story-image">
                    <div id="prev-story-button" class="story-nav-button prev">&lt;</div>
                    <div id="next-story-button" class="story-nav-button next">&gt;</div>
                    <div id="replay-story-overlay" class="replay-story-overlay">
                        <button id="replay-story-button" class="replay-story-button">Replay Story</button>
                    </div>
                </div>
            </div>

            <!-- About Astralgia Content Box -->
            <div class="content-box bg-[#D1DBD7] text-[#1A325C] rounded-xl p-4 md:p-6 shadow-lg">
                <div class="collapsible-header" data-target="about-astralgia-content">
                    <h3 class="font-bold-custom text-xl md:text-2xl">About Astralgia</h3>
                    <span class="arrow text-2xl">+</span>
                </div>
                <div id="about-astralgia-content" class="collapsible-content">
                    <p class="leading-relaxed text-base md:text-lg">
                        Astralgia. Released July 5, 2024. This was a lot to make. There were so many poemsthat it hurts to cut and discard the otthers. Although not my biggest release, it's above the average of around 11-12 poems. Most of this was written during the summer vacation. I found myself writing about the past, present, and future. I even wrote about the people I met, the people I am with, the people I wish to be with, people I wished I never met, and the person I don't want to become. THis was a lot to pack and unpack. My emotions wrapped in carbed wires but tied with a cute silver sparkly ribbon, Astralgia.
                    </p>
                </div>
            </div>

            
            <!-- Catalog Section (Now a full-width section below other content) -->
            <div class="catalog-section bg-[#D1DBD7] text-[#1A325C] rounded-xl p-4 md:p-6 shadow-lg">
    <h2 class="font-bold-custom text-2xl md:text-3xl mb-4 text-center">catalog</h2>
    <div class="catalog-photos-grid grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-4">
        <a href="your-previous-release-page.html" class="block w-full h-full"> <div class="catalog-photo-placeholder transition-transform duration-200 hover:translate-y-[-5px]">
                <div class="catalog-photo-overlay">
                    <span class="release-type">Previous Release</span>
                    <span class="release-title">Title Here</span>
                </div>
            </div>
        </a>
        
        <a href="your-next-release-page.html" class="block w-full h-full"> <div class="catalog-photo-placeholder transition-transform duration-200 hover:translate-y-[-5px]">
                <div class="catalog-photo-overlay">
                    <span class="release-type">Next Release</span>
                    <span class="release-title">Title Here</span>
                </div>
            </div>
        </a>
    </div>
</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Collapsible sections logic
            const collapsibleHeaders = document.querySelectorAll('.collapsible-header');

            collapsibleHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const targetId = this.dataset.target;
                    const content = document.getElementById(targetId);
                    const arrow = this.querySelector('.arrow');

                    if (content.classList.contains('expanded')) {
                        content.classList.remove('expanded');
                        content.style.maxHeight = null; // Reset max-height
                        arrow.classList.remove('expanded');
                        arrow.textContent = '+';
                    } else {
                        // Collapse any other open sections first (optional, but good UX)
                        document.querySelectorAll('.collapsible-content.expanded').forEach(openContent => {
                            openContent.classList.remove('expanded');
                            openContent.style.maxHeight = null;
                            const openArrow = openContent.previousElementSibling.querySelector('.arrow');
                            if (openArrow) {
                                openArrow.classList.remove('expanded');
                                openArrow.textContent = '+';
                            }
                        });

                        content.classList.add('expanded');
                        // Set max-height to scrollHeight to allow smooth transition
                        content.style.maxHeight = content.scrollHeight + "px";
                        arrow.classList.add('expanded');
                        arrow.textContent = '-';
                    }
                });
            });

            // Astralgia Story Section Logic
            const storyViewerSection = document.getElementById('story-viewer-section');
            const storyImage = document.getElementById('story-image');
            const prevStoryButton = document.getElementById('prev-story-button');
            const nextStoryButton = document.getElementById('next-story-button');
            const storyProgressContainer = document.getElementById('story-progress-container');
            const replayStoryOverlay = document.getElementById('replay-story-overlay');
            const replayStoryButton = document.getElementById('replay-story-button');

            // --- USER EDITABLE: Add your image URLs here ---
            const storyPhotos = [
                // Example placeholders:
                "https://placehold.co/900x1600/1A325C/D1DBD7?text=Story+Photo+1",
                "https://placehold.co/900x1600/1A325C/D1DBD7?text=Story+Photo+2",
                "https://placehold.co/900x1600/1A325C/D1DBD7?text=Story+Photo+3",
                "https://placehold.co/900x1600/1A325C/D1DBD7?text=Story+Photo+4",
                // Add more image URLs as strings:
                // "https://your-domain.com/path/to/your-photo-5.jpg",
                // "https://your-domain.com/path/to/your-photo-6.png",
            ];
            // --- END USER EDITABLE ---

            let currentStoryIndex = 0;
            let storyInterval;
            const STORY_DURATION = 5000; // 5 seconds per story

            /**
             * Creates and appends progress bars to the story progress container.
             * Each bar represents a story slide.
             */
            function createProgressBars() {
                storyProgressContainer.innerHTML = ''; // Clear existing bars
                storyPhotos.forEach((_, index) => {
                    const barWrapper = document.createElement('div');
                    barWrapper.classList.add('story-progress-bar');
                    const fill = document.createElement('div');
                    fill.classList.add('story-progress-fill');
                    barWrapper.appendChild(fill);
                    storyProgressContainer.appendChild(barWrapper);
                });
            }

            /**
             * Starts or restarts the auto-scroll timer and updates the progress bar animation.
             */
            function startStoryTimer() {
                clearInterval(storyInterval); // Clear any existing timer
                if (storyPhotos.length > 0) { // Only auto-scroll if there are stories
                    storyInterval = setInterval(() => {
                        showNextStory(true); // Pass 'true' to indicate auto-scroll
                    }, STORY_DURATION);
                }
                // Reset and start animation for current bar
                updateProgressBarAnimation();
            }

            /**
             * Updates the animation state of the progress bars based on the current story index.
             */
            function updateProgressBarAnimation() {
                const fills = storyProgressContainer.querySelectorAll('.story-progress-fill');
                fills.forEach((fill, index) => {
                    fill.style.animation = 'none'; // Reset animation
                    fill.style.width = '0'; // Reset width
                    if (index < currentStoryIndex) {
                        fill.style.width = '100%'; // Previous bars are full
                    } else if (index === currentStoryIndex) {
                        // Current bar animates
                        fill.style.animation = `fillProgressBar ${STORY_DURATION / 1000}s linear forwards`;
                    }
                });
            }

            /**
             * Updates the displayed story image and progress bar.
             */
            function updateStoryImage() {
                if (storyPhotos.length === 0) {
                    storyImage.src = ''; // Clear image if no photos
                    console.warn("No story photos defined. Add URLs to the 'storyPhotos' array.");
                    return;
                }
                storyImage.src = storyPhotos[currentStoryIndex];
                updateProgressBarAnimation(); // Update animation on image change
            }

            /**
             * Shows the next story in the sequence.
             * @param {boolean} [isAutoScroll=false] - True if called by auto-scroll, false if by manual click.
             */
            function showNextStory(isAutoScroll = false) {
                if (currentStoryIndex === storyPhotos.length - 1) {
                    // This is the last story
                    clearInterval(storyInterval); // Stop the timer
                    replayStoryOverlay.classList.add('visible'); // Show replay overlay
                    storyImage.style.opacity = '0'; // Fade out image
                } else {
                    // Go to the next story
                    currentStoryIndex++;
                    updateStoryImage();
                    startStoryTimer(); // Restart timer for new slide
                }
            }

            /**
             * Shows the previous story in the sequence.
             */
            function showPrevStory() {
                replayStoryOverlay.classList.remove('visible'); // Hide replay overlay if navigating back
                storyImage.style.opacity = '1'; // Ensure image is visible
                currentStoryIndex = (currentStoryIndex - 1 + storyPhotos.length) % storyPhotos.length;
                updateStoryImage();
                startStoryTimer(); // Restart timer for new slide
            }

            /**
             * Resets and restarts the story sequence.
             */
            function replayStory() {
                replayStoryOverlay.classList.remove('visible'); // Hide replay overlay
                storyImage.style.opacity = '1'; // Ensure image is visible
                currentStoryIndex = 0;
                createProgressBars(); // Recreate bars to reset their state
                updateStoryImage();
                startStoryTimer(); // Start timer from beginning
            }

            // Event Listeners for Story Section
            nextStoryButton.addEventListener('click', () => showNextStory(false)); // Manual click
            prevStoryButton.addEventListener('click', showPrevStory);
            replayStoryButton.addEventListener('click', replayStory);

            // Initialize story on page load
            if (storyPhotos.length > 0) {
                createProgressBars();
                updateStoryImage();
                startStoryTimer();
            } else {
                console.warn("No story photos defined. The story section will remain empty.");
                // Optionally hide story section if no photos
                storyViewerSection.style.display = 'none';
            }

            // Keyboard navigation for stories
            document.addEventListener('keydown', function(event) {
                // Only respond to keyboard if story section is visible and not in replay state
                if (storyViewerSection.offsetParent !== null && !replayStoryOverlay.classList.contains('visible')) {
                    if (event.key === 'ArrowRight') {
                        showNextStory(false); // Manual keyboard navigation
                    } else if (event.key === 'ArrowLeft') {
                        showPrevStory();
                    }
                } else if (event.key === 'Enter' && replayStoryOverlay.classList.contains('visible')) {
                    replayStory(); // Replay on Enter key when in replay state
                }
            });
        });
    </script>
</body>
</html>
